<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (ez_file.FileDirMaker.Make)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">ez_file</a> &#x00BB; <a href="../index.html">FileDirMaker</a> &#x00BB; Make</nav><h1>Module <code>FileDirMaker.Make</code></h1></header><h3 class="heading">Parameters</h3><ul><li><code><a href="argument-1-M/index.html">M</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></li></ul><h3 class="heading">Signature</h3><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>Type of a filename. It is <code>string</code> in <code>FileString</code> and <code>FileGen.t</code> in <code>FileGen</code>.</p></dd></dl><dl><dt class="spec exception" id="exception-NotADirectory"><a href="#exception-NotADirectory" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">NotADirectory</span> <span class="keyword">of</span> <a href="index.html#type-t">t</a></code></dt><dd><p>This exception is raised when one of the following functions is called with a non-directory argument</p></dd></dl><dl><dt class="spec value" id="val-make_dir"><a href="#val-make_dir" class="anchor"></a><code><span class="keyword">val</span> make_dir : <span>?&#8288;mode:int</span> <span>&#45;&gt;</span> <span>?&#8288;p:bool</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>make_dir ?mode ?p filename</code> creates a directory <code>filename</code>, if it does not already exist. It fails with <code>NotADirectory</code> if the file already exists, but is not a directory. The <code>mode</code> argument is the Unix permissions (0o755 by default). The <code>p</code> argument controls whether parents directories should be created as well, if they don't exist, instead of failing.</p></dd></dl><dl><dt class="spec value" id="val-remove_dir"><a href="#val-remove_dir" class="anchor"></a><code><span class="keyword">val</span> remove_dir : <span>?&#8288;all:bool</span> <span>&#45;&gt;</span> <span>?&#8288;glob:string</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>remove_dir ?all filename</code> removes directory <code>filename</code>, or complains the <code>NotADirectory</code> if it does not exist. The <code>all</code> argument controls whether the function should recursively remove all files and sub-directories included as well. If <code>glob</code> is specified, it is called to select files to remove, and the directories are not deleted even if <code>all</code> is <code>true</code>.</p></dd></dl><dl><dt class="spec value" id="val-select"><a href="#val-select" class="anchor"></a><code><span class="keyword">val</span> select : <span>?&#8288;deep:bool</span> <span>&#45;&gt;</span> <span>?&#8288;dft:<span>[ `After <span>| `Before</span> ]</span></span> <span>&#45;&gt;</span> <span>?&#8288;glob:string</span> <span>&#45;&gt;</span> <span>?&#8288;filter:<span>(bool <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> bool)</span></span> <span>&#45;&gt;</span> <span>?&#8288;follow_links:bool</span> <span>&#45;&gt;</span> <span>?&#8288;error:<span>(exn <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit)</span></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> <a href="../../FileSelector/index.html#type-t">FileSelector.t</a></span></code></dt><dd><p><code>select ?deep ?dft ?glob ?filter ?follow_links ?error ()</code> creates a selctor to customize a file iterator.</p><p>The <code>deep</code> and <code>dft</code> arguments controls whether function should recurse in sub-directories. If <code>deep</code> is <code>true</code>, and <code>~dft</code> is not specified, the files are listed in breadth-first mode (<code>a,b,a/x,b/x,a/x/y</code> for example). If <code>~dft</code> is <code>`Before</code>, the files are listed in depth-first mode, and the ancestors are before their children. If <code>~dft</code> is <code>`After</code>, the are after their children.</p><p>The <code>glob</code> argument can be used to filter the basenames of files with a regular expression.</p><p>The <code>filter</code> argument is called as <code>filter is_dir basename path</code> where <code>is_dir</code> is set when checking whether to enter or not into a sub-directory, <code>basename</code> is the basename of the file and <code>path</code> is the path starting with a '/', yet relative to the initial directory. <code>filter</code> is called on every file with <code>is_dir</code> false to decide whether it should be added or not, and only on sub-directories with <code>is_dir</code> true to decide whether to enter or not if <code>deep</code> is true.</p><p>The <code>follow_links</code> argument is used to decide if a link to directory should be followed (when <code>deep</code> is also set).</p><p>The <code>error</code> argument is called when an error occurs, with <code>error exn path filename</code>.</p></dd></dl><dl><dt class="spec value" id="val-read_dir"><a href="#val-read_dir" class="anchor"></a><code><span class="keyword">val</span> read_dir : <span>?&#8288;select:<span><a href="index.html#type-t">t</a> <a href="../../FileSelector/index.html#type-t">FileSelector.t</a></span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> array</span></code></dt><dd><p><code>read_dir ?select filename</code> returns the files contained in the directory <code>filename</code>.</p><p>In a directory, files are sorted in lexicographical order of their names.</p></dd></dl><dl><dt class="spec value" id="val-read_dir_to_list"><a href="#val-read_dir_to_list" class="anchor"></a><code><span class="keyword">val</span> read_dir_to_list : <span>?&#8288;select:<span><a href="index.html#type-t">t</a> <a href="../../FileSelector/index.html#type-t">FileSelector.t</a></span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> list</span></code></dt><dd><p>Same as <code>read_dir</code>, but returns a list instead of an array</p></dd></dl><dl><dt class="spec value" id="val-iter_dir"><a href="#val-iter_dir" class="anchor"></a><code><span class="keyword">val</span> iter_dir : <span>?&#8288;select:<span><a href="index.html#type-t">t</a> <a href="../../FileSelector/index.html#type-t">FileSelector.t</a></span></span> <span>&#45;&gt;</span> <span>(<span>basename:string</span> <span>&#45;&gt;</span> <span>localpath:string</span> <span>&#45;&gt;</span> <span>file:<a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Same as <code>read_dir</code>, but calls a function on every file and directory with the basename, the relative path (yet, starting with a '/') and the filename (i.e. the directory name concatenated with the relative path): <code>f basename path file</code>. It is not equivalent to using <code>read_dir</code> and then itering on the result, as <code>iter_dir</code> the function is called during the traversal, not after.</p></dd></dl><dl><dt class="spec value" id="val-iterator"><a href="#val-iterator" class="anchor"></a><code><span class="keyword">val</span> iterator : <span>?&#8288;select:<span><a href="index.html#type-t">t</a> <a href="../../FileSelector/index.html#type-t">FileSelector.t</a></span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><span>(string * <a href="index.html#type-t">t</a>)</span> option</span></code></dt><dd><p><code>iterator ?select dir</code> creates an iterator on directory <code>dir</code>. The iterator is a function that returns <code>None</code> when finished, or <code>Some (path, filename)</code> with the next file to iter on.</p></dd></dl><dl><dt class="spec value" id="val-mkdir"><a href="#val-mkdir" class="anchor"></a><code><span class="keyword">val</span> mkdir : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dd><p><code>mkdir filename mode</code> simply creates the directory <code>filename</code> with permissions <code>mode</code>.</p></dd></dl><dl><dt class="spec value" id="val-readdir"><a href="#val-readdir" class="anchor"></a><code><span class="keyword">val</span> readdir : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>string array</span></code></dt><dd><p><code>readdir filename</code> returns the files contained in directory <code>filename</code> as an array of strings. The strings are sorted in lexicographical order.</p></dd></dl><dl><dt class="spec value" id="val-rmdir"><a href="#val-rmdir" class="anchor"></a><code><span class="keyword">val</span> rmdir : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>rmdir filename</code> removes directory <code>filename</code>, or fails if it does not exist or is not a directory.</p></dd></dl></div></body></html>